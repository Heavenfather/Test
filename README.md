# “镇灵”部分功能实现方法
****
### 这个文档主要是说明某些功能模块是如何实现的

----

####声音系统
----
1.我自己写了一个声音管理系统的脚本，这个脚本主要帮助我播放、设置音量的大小、将全部的音源做统一管理
    （1）在一个场景Scene中将所有这个场景需要用到的声音剪辑都添加到一个数组中
    （2）通过foreach循环，将数组中的所有声音剪辑都Add添加到一个字典中，后面将会用于键值的方式获取声音剪辑
    （3）这里面的声音剪辑我分为两部分，一个是背景音乐的，一个是音效的声音，在Unity中需要给这两个声音资源都添加一个Audio Source进行处理
    （4）播放音乐的函数，我重载了两个，可以通过赋值Audio Clip和声音剪辑名字的形式进行播放，这里推荐：背景音乐这种体量比较大的声音用Audio Clip的形式赋值，音效这种可以在Unity的面板中添加到数组中，然后在代码里通过剪辑的名字获取到这段音频，这样子可以快速的获取到这一段的音效，所以音效推荐用声音剪辑的名字形式赋值
    （5）设置音效和音量方面，这里的使用方法，可以直接将Unity里的Slider的值直接复制给里面的参数即可。
----
2.使用自己写的声音管理脚本
    （1）每个场景都需要挂载一个Audio Listener、两个Audio Source和AudioManager脚本
    （2）将当前的场景中，所有需要用到的音效声音都添加到AudioManager里面的数组中，背景音乐则通过赋值Audio Clip的方式赋值
    （3）将这个场景中，那里播放音效声音的直接调用AudioManager里面的播放音效的函数即可，注意名字必须要和数组里面的声音剪辑的名字一致
----
#### UI系统
----
1.这个游戏里面的UI系统控制是通过自己搭建的一个UI框架使用的，这个框架实现的功能比较多且比较复杂，搭建的时候都也有说明，这里不再赘述
----
2.使用UI框架
    （1）用提前做好的一个Canvas布置好所有的UI面板
    （2）布置好每一个面板后都把它做成预制体
    （3）因为UI框架里面可以通过读取JSON文件的格式获取路径，所以再在自定义的一个JSON文件中配置好每一个UI面板的路径
    （4）每一个UI窗体预设都是通过键值对的形式获取的，所以需要在一个管理全局参数的脚本中设置好每一个UI窗体的名字，注意这里的UI窗体的名字必须要和配置JSON文件里面的名字一样
    （5）给每一个UI窗体都定义一个继承自BaseUIForms的类，并且设置好这个窗体的几个类型，每个类型的功能是不一样的
    （6）将这样的一个类都必须都挂载到对应的UI窗体中